<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8" />
<title>Bobe + Hexagrama</title>
<style>
  /* PosiciÃ³n y tamaÃ±o del SVG sobre el cuaderno */
  :root { --x: 38%; --y: 57%; --w: 21%; }

  body{font-family:Georgia,serif;background:#fdf6e3;color:#333;margin:24px}
  h1{color:#b23a48;margin:.2rem 0 .6rem}
  .frame{position:relative;width:540px;max-width:90vw;margin:auto}
  .base{display:block;width:100%;height:auto;border-radius:6px;box-shadow:0 2px 10px rgba(0,0,0,.18)}
  .overlay{position:absolute;left:var(--x);top:var(--y);width:var(--w);
           transform:translate(-50%,-50%);filter:drop-shadow(0 1px 2px rgba(0,0,0,.2))}
  .meta{margin-top:.8rem;text-align:center}
  .meta strong{color:#b23a48}
  .acciones{margin-top:12px;text-align:center}
  button{padding:.55rem .9rem;border:none;border-radius:8px;background:#b23a48;color:#fff;cursor:pointer}
  button:hover{background:#922d3a}
</style>
</head>
<body>
  <h1>ðŸ”® La Bobe del I Ching</h1>

  <figure class="frame">
    <!-- Tu imagen local del cuaderno -->
    <img class="base" src="./hexagrama1.png" alt="Bluma con cuaderno">
    <!-- SVG de Wikipedia encima -->
    <img id="overlay" class="overlay" alt="Hexagrama Wikipedia">
  </figure>

  <p class="meta" id="meta">Cargandoâ€¦</p>

  <div class="acciones">
    <button id="otra">Otra consulta</button>
  </div>

<script>
  // Ruta al JSON en /data/
  const JSON_URL = "./data/hexagramas.json";

  // URL de Commons que sirve el SVG renderizado (~400px ancho)
  function urlWikipedia(numero){
    const xx = String(numero).padStart(2,'0');
    return `https://commons.wikimedia.org/wiki/Special:FilePath/Iching-hexagram-${xx}.svg?width=400`;
  }

  let hexas = [];

  async function cargarDatos(){
    const res = await fetch(JSON_URL, { cache: "no-cache" });
    hexas = await res.json();
  }

  function elegirRandom(){
    const i = Math.floor(Math.random()*hexas.length);
    return hexas[i];
  }

  function mostrar(h){
    // Texto: nÃºmero + nombre
    const meta = document.getElementById('meta');
    meta.innerHTML = `Hexagrama <strong>${h.number}</strong> â€” <strong>${h.name}</strong>`;

    // SVG sobre el cuaderno
    const ov = document.getElementById('overlay');
    ov.src = h.wiki || urlWikipedia(h.number);
    ov.alt = `Hexagrama Wikipedia ${h.number}`;
  }

  document.addEventListener('DOMContentLoaded', async ()=>{
    await cargarDatos();
    mostrar(elegirRandom());
    document.getElementById('otra').addEventListener('click', ()=> mostrar(elegirRandom()));
  });
</script>
</body>
</html>
