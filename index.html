<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Bobe + Hexagrama (compacto)</title>
<style>
  :root { --x: 38%; --y: 57%; --w: 21%; } /* overlay fijo */

  body{margin:10px;font-family:Georgia,serif;background:#fdf6e3;color:#333}
  .app{max-width:760px;margin:0 auto}
  .row{display:flex;gap:14px;align-items:center}
  .frame{position:relative;width:380px;max-width:55vw}
  .base{display:block;width:100%;height:auto;border-radius:6px;box-shadow:0 2px 8px rgba(0,0,0,.15)}
  .overlay{position:absolute;left:var(--x);top:var(--y);width:var(--w);
           transform:translate(-50%,-50%);filter:drop-shadow(0 1px 2px rgba(0,0,0,.2))}
  .meta{min-width:220px}
  .title{margin:0 0 4px;font-size:18px;color:#b23a48;line-height:1.2}
  .sub{margin:0 0 10px;font-size:14px;opacity:.85}
  button{font-size:14px;padding:8px 12px;border:none;border-radius:8px;
         background:#b23a48;color:#fff;cursor:pointer}
  button:hover{background:#922d3a}

  /* Compacto en pantallas angostas */
  @media (max-width:520px){
    .row{flex-direction:column;align-items:center}
    .frame{width:92vw;max-width:420px}
    .meta{width:100%;text-align:center}
  }
</style>
</head>
<body>
  <div class="app">
    <div class="row">
      <figure class="frame" aria-label="Imagen de la Bobe con cuaderno">
        <img class="base" src="./hexagrama1.png" alt="Bluma con cuaderno">
        <img id="overlay" class="overlay" alt="Hexagrama Wikipedia">
      </figure>

      <div class="meta">
        <h2 class="title" id="title">Cargando…</h2>
        <p class="sub">Tirá otra consulta si querés ver un nuevo hexagrama.</p>
        <button id="otra">Otra consulta</button>
      </div>
    </div>
  </div>

<script>
  const JSON_URL = "./data/hexagramas.json";

  function urlWikipedia(numero){
    const xx = String(numero).padStart(2,'0');
    return `https://commons.wikimedia.org/wiki/Special:FilePath/Iching-hexagram-${xx}.svg?width=400`;
  }

  let hexas = [];

  async function cargarDatos(){
    const res = await fetch(JSON_URL, { cache: "no-cache" });
    hexas = await res.json();
  }

  function elegirRandom(){
    const i = Math.floor(Math.random()*hexas.length);
    return hexas[i];
  }

  function mostrar(h){
    document.getElementById('title').textContent = `Hexagrama ${h.number} — ${h.name}`;
    const ov = document.getElementById('overlay');
    ov.src = h.wiki || urlWikipedia(h.number);
    ov.alt = `Hexagrama Wikipedia ${h.number}`;
  }

  document.addEventListener('DOMContentLoaded', async ()=>{
    await cargarDatos();
    mostrar(elegirRandom());
    document.getElementById('otra').addEventListener('click', ()=> mostrar(elegirRandom()));
  });
</script>
</body>
</html>
